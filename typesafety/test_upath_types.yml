
- case: upath_types_joinablepath_upath
  disable_cache: false
  main: |
    from upath import UPath
    from upath.types import JoinablePath

    a: JoinablePath = UPath()

- case: upath_types_joinablepathlike
  disable_cache: false
  main: |
    from pathlib import PurePath
    from pathlib import Path
    from upath import UPath
    from upath.types import JoinablePathLike

    a: JoinablePathLike = "abc"
    b: JoinablePathLike = PurePath()
    c: JoinablePathLike = Path()
    d: JoinablePathLike = UPath()

- case: get_upath_class_fsspec_protocols
  disable_cache: false
  parametrized:
    - cls_fqn: upath.implementations.cached.SimpleCachePath
      protocol: simplecache
    - cls_fqn: upath.implementations.cloud.S3Path
      protocol: s3
    - cls_fqn: upath.implementations.cloud.GCSPath
      protocol: gcs
    - cls_fqn: upath.implementations.cloud.AzurePath
      protocol: abfs
    - cls_fqn: upath.implementations.data.DataPath
      protocol: data
    - cls_fqn: upath.implementations.github.GitHubPath
      protocol: github
    - cls_fqn: upath.implementations.hdfs.HDFSPath
      protocol: hdfs
    - cls_fqn: upath.implementations.http.HTTPPath
      protocol: http
    - cls_fqn: upath.implementations.local.FilePath
      protocol: file
    - cls_fqn: upath.implementations.memory.MemoryPath
      protocol: memory
    - cls_fqn: upath.implementations.sftp.SFTPPath
      protocol: sftp
    - cls_fqn: upath.implementations.smb.SMBPath
      protocol: smb
    - cls_fqn: upath.implementations.webdav.WebdavPath
      protocol: webdav
  main: |
    from upath.registry import get_upath_class

    path_cls = get_upath_class("{{ protocol }}")
    reveal_type(path_cls)  # N: Revealed type is "type[{{ cls_fqn }}]"

- case: get_upath_class_pathlib_unix
  disable_cache: false
  skip: sys.platform == "win32"
  main: |
    from upath.registry import get_upath_class

    path_cls = get_upath_class("")
    reveal_type(path_cls)  # N: Revealed type is "type[upath.implementations.local.PosixUPath]"

- case: get_upath_class_pathlib_win
  disable_cache: false
  skip: sys.platform != "win32"
  main: |
    from upath.registry import get_upath_class

    path_cls = get_upath_class("")
    reveal_type(path_cls)  # N: Revealed type is "type[upath.implementations.local.WindowsUPath]"

- case: get_upath_class_unknown_protocol_py39
  disable_cache: false
  skip: sys.version_info >= (3, 10)
  main: |
    from upath.registry import get_upath_class

    path_cls = get_upath_class("some-unknown-protocol")
    reveal_type(path_cls)  # N: Revealed type is "Union[type[upath.core.UPath], None]"

- case: get_upath_class_unknown_protocol_py310plus
  disable_cache: false
  skip: sys.version_info < (3, 10)
  main: |
    from upath.registry import get_upath_class

    path_cls = get_upath_class("some-unknown-protocol")
    reveal_type(path_cls)  # N: Revealed type is "type[upath.core.UPath] | None"
